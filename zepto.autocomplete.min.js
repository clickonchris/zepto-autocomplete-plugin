(function(g){var h={init:function(a){function d(){var a=e[0].externalData.storage;a[0].scrollTop=0;a.hide()}function j(a){e.val(a.target.innerHTML)}function h(){var a=e[0].externalData.storage,c=e[0].externalData.settings;a.empty();a.hide();var d=e.val();c.data.sort();for(var b=0;b<c.data.length;b++)if(-1!=c.data[b].toLowerCase().indexOf(d.toLowerCase())&&d){var j=g("<div>").html(c.data[b]).css("height",c.height+"px");a.append(j)}a.find("div").length&&(f=a.find("div:first-child"),f.css("background",
c.currentBackground),a.show())}function k(a){var c=e[0].externalData.storage;f.prev().length&&(a&&(c[0].scrollTop-=b.height),f.css("background",b.optionBackground),f=f.prev(),f.css("background",b.currentBackground))}function l(a){var c=e[0].externalData.storage;f.next().length&&(a&&(c[0].scrollTop+=b.height),f.css("background",b.optionBackground),f=f.next(),f.css("background",b.currentBackground))}function m(a){var c=e[0].externalData.storage,b=e[0].externalData.settings;switch(a.keyCode){case 37:break;
case 39:break;case 38:var d=f.index()-1;b.scrollable?(a=!1,d<c[0].scrollTop/b.height&&(a=!0),k(a)):k();break;case 40:c=f.index()+1;b.scrollable?(a=!1,c>=b.maxOptions&&(a=!0),l(a)):c<b.maxOptions&&l();break;case 13:c.width()&&(e.val(f.html()),c.empty(),c.hide());break;default:h()}}var b=g.extend({data:[],height:20,maxOptions:100,scrollable:!0,optionBackground:"#FFFFFF",currentBackground:"#EBE1E5"},a),e=this,f=null;if(!e[0].externalData){console.log("init");a=g("<div>");g("body").append(a);var n=e.offset().left,
p=e.offset().top+e.height();a.width(e.width()-2);a.css("zIndex",1E3);a.css("position","absolute").css("top",p).css("left",n).css("border","1px solid black").css("background","white");e.attr("data-autocomplete","true");a.on("mousedown.autocomplete","div",j);b.scrollable?a.css("overflow","auto"):a.css("overflow","hidden");b.maxOptions>b.data.length?a.css("max-height",b.data.length*b.height+"px"):a.css("max-height",b.maxOptions*b.height+"px");e[0].externalData={storage:a,settings:b};a.hide();return e.each(function(){e.bind("focus.autocomplete",
h).bind("keyup.autocomplete",m).bind("blur.autocomplete",d)})}},destroy:function(){return this.each(function(){$this=g(this);$this.unbind(".autocomplete");g(this.externalData.storage).remove();delete this.externalData})},add:function(a){$this=this;"[object Array]"!=Object.prototype.toString.call(a)&&(a=[a]);a=$this[0].externalData.settings.data.concat(a);for(var d={},g=0;g<a.length;g++)d[a[g]]=!0;a=Object.keys(d);d=$this[0].externalData;d.settings.data=a.sort();d.settings.maxOptions>d.settings.data.length?
d.storage.css("max-height",d.settings.data.length*d.settings.height+"px"):d.storage.css("max-height",d.settings.maxOptions*d.settings.height+"px")}};g.fn.autoComplete=function(a){if(h[a])return h[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return h.init.apply(this,arguments);g.error("\u041cethod named "+a+" does not exist for Zepto.autocomplete")}})(Zepto);
